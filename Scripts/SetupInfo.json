{
    "general":
    {
        "tenantName":"tenantname.onmicrosoft.com",
        "copyProcessQueueName":"copy-process-queue",
        "imageCreationQueueName":"image-creation-process-queue"
    },
    "requiredModulesToInstall":[
        "AzureRmStorageTable",
        "AzureRmStorageQueue",
        "MSOnline",
        "AzureRmImageManagement"
    ],                  
    "storage":
    {
        "tier0StorageAccount":
        {
            "storageAccountPrefix":"pmcstorage77",
            "resourceGroup":"imageprocess-rg",
            "location":"westus2",
            "subscriptionId":"af86d43c-d9b4-4b18-a1a4-1db9830c015a",
            "container":"vhds",
            "modulesContainer":"modules",
            "configurationTableName":"imageManagementConfiguration",
            "tier1Copies":10
        },
        "tier2StorageAccounts":
        [
            {
                "storageAccountPrefix":"pmcstorage77sub1",
                "resourceGroup":"^$config.storage.tier0StorageAccount.resourceGroup",
                "location":"^$config.storage.tier0StorageAccount.location",
                "container":"^$config.storage.tier0StorageAccount.container",
                "subscriptionId":"^$config.storage.tier0StorageAccount.subscriptionId"
            },
            {
                "storageAccountPrefix":"pmcstorage77sub2",
                "resourceGroup":"^$config.storage.tier0StorageAccount.resourceGroup",
                "location":"^$config.storage.tier0StorageAccount.location",
                "container":"^$config.storage.tier0StorageAccount.container",
                "subscriptionId":"c0d433f7-b5e8-441a-91b5-5db70c69d7b8"
            }
        ]
    },
    "automationAccount":
    {
        "subscriptionId":"^$config.storage.tier0StorageAccount.subscriptionId",
        "applicationDisplayNamePrefix":"TestAutomationSP",
        "resourceGroup":"^$config.storage.tier0StorageAccount.resourceGroup",
        "location":"southcentralus",
        "automationAccountNamePrefix":"ImageManagementAutomation",
        "workerAutomationAccountsCount":2,
        "availableDedicatedCopyJobs":150,
        "maxDedicatedCopyJobs":150,
        "availableDedicatedImageCreationJobs":150,
        "maxDedicatedImageCreationJobs":150,
        "connectionName":"AzureRunAsConnection",
        "runbooks":
        {
            "mainAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },
                {
                    "name":"Start-ImageManagementTier1Distribution",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementTier1Distribution.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]
                },
                {
                    "name":"Start-ImageManagementTier2Distribution",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementTier2Distribution.ps1",
                    "scheduleName":"HourlySchedule",
                    "scheduleHourInterval":1,
                    "executeBeforeMoveForward":false,
                    "parameters":[
                        {
                            "key":"ConfigStorageAccountResourceGroupName",
                            "value":"^$config.storage.tier0StorageAccount.resourceGroup"
                        },
                        {
                            "key":"ConfigStorageAccountName",
                            "value":"^[string]::Format(\"{0}tier0\",$config.storage.tier0StorageAccount.storageAccountPrefix)"
                        },
                        {
                            "key":"ConfigurationTableName",
                            "value":"^$config.storage.tier0StorageAccount.configurationTableName"
                        },
                        {
                            "key":"Tier0SubscriptionId",
                            "value":"^$config.storage.tier0StorageAccount.subscriptionId"
                        },
                        {
                            "key":"ConnectionName",
                            "value":"^$config.automationAccount.connectionName"
                        }
                    ],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                },
                {
                    "name":"Start-ImageManagementImageCreation",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementImageCreation.ps1",
                    "scheduleName":"HourlySchedule",
                    "scheduleHourInterval":1,
                    "executeBeforeMoveForward":false,
                    "parameters":[
                        {
                            "key":"ConfigStorageAccountResourceGroupName",
                            "value":"^$config.storage.tier0StorageAccount.resourceGroup"
                        },
                        {
                            "key":"ConfigStorageAccountName",
                            "value":"^[string]::Format(\"{0}tier0\",$config.storage.tier0StorageAccount.storageAccountPrefix)"
                        },
                        {
                            "key":"ConfigurationTableName",
                            "value":"^$config.storage.tier0StorageAccount.configurationTableName"
                        },
                        {
                            "key":"Tier0SubscriptionId",
                            "value":"^$config.storage.tier0StorageAccount.subscriptionId"
                        },
                        {
                            "key":"ConnectionName",
                            "value":"^$config.automationAccount.connectionName"
                        }
                    ],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ],
            "copyProcessAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },                
                {
                    "name":"Start-ImageManagementVhdCopyTier2",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementVhdCopyTier2.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ],
            "imageCreationProcessAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },
                {
                    "name":"New-ImageManagementImage",
                    "scriptPath":"..\\Runbooks\\New-ImageManagementImage.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ]
        }
    }
}