{
    "general":
    {
        "tenantName":"pmcglobal.onmicrosoft.com",
        "copyProcessQueueName":"copy-process-queue",
        "imageCreationQueueName":"image-creation-process-queue",
        "jobTableName":"imageManagementJobs",
        "jobLogTableName":"imageManagementJobLogs"
    },
    "requiredModulesToInstall":[
        "AzureRmStorageTable",
        "AzureRmStorageQueue",
        "MSOnline",
        "AzureRmImageManagement"
    ],                  
    "storage":
    {
        "tier0StorageAccount":
        {
            "comments":[
                "PMC Subscription",
                "For tier 0 storage account, select the region that will have most of the destination SAs",
                "Also, for tier 0 storage account, use its full name instead of the [StorageAccountName] generated name",
                "To change tier1Copies, this needs to be changed in the configuration table directly"
            ],
            "resourceGroup":"PMC-OS-Images-Solution-rg",
            "storageAccountName":"pmcPMCosimgsa",
            "location":"westus",
            "subscriptionId":"<subscription id here>",
            "container":"vhds",
            "modulesContainer":"modules",
            "configurationTableName":"imageManagementConfiguration",
            "tier1Copies":2
        },
        "tier2StorageAccounts":
        [
            {
                "storageAccountName":"^([StorageAccountName]::new(\"pmcosimg\",[storageAccountTier]::tier2)).GetSaName($true)",
                "resourceGroup":"^$config.storage.tier0StorageAccount.resourceGroup",
                "location":"^$config.storage.tier0StorageAccount.location",
                "container":"^$config.storage.tier0StorageAccount.container",
                "subscriptionId":"^$config.storage.tier0StorageAccount.subscriptionId"
            }
        ]
    },
    "automationAccount":
    {
        "subscriptionId":"^$config.storage.tier0StorageAccount.subscriptionId",
        "applicationDisplayNamePrefix":"pmcPMCOSImg-SP",
        "resourceGroup":"^$config.storage.tier0StorageAccount.resourceGroup",
        "location":"southcentralus",
        "automationAccountNamePrefix":"pmcPMCOSImg-AA",
        "workerAutomationAccountsCount":1,
        "availableDedicatedCopyJobs":150,
        "maxDedicatedCopyJobs":150,
        "availableDedicatedImageCreationJobs":150,
        "maxDedicatedImageCreationJobs":150,
        "connectionName":"AzureRunAsConnection",
        "runbooks":
        {
            "mainAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },
                {
                    "name":"Start-ImageManagementTier1Distribution",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementTier1Distribution.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]
                },
                {
                    "name":"Start-ImageManagementTier2Distribution",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementTier2Distribution.ps1",
                    "scheduleName":"HourlySchedule",
                    "scheduleHourInterval":1,
                    "executeBeforeMoveForward":false,
                    "parameters":[
                        {
                            "key":"ConfigStorageAccountResourceGroupName",
                            "value":"^$config.storage.tier0StorageAccount.resourceGroup"
                        },
                        {
                            "key":"ConfigStorageAccountName",
                            "value":"^$config.storage.tier0StorageAccount.storageAccountName"
                        },
                        {
                            "key":"ConfigurationTableName",
                            "value":"^$config.storage.tier0StorageAccount.configurationTableName"
                        },
                        {
                            "key":"Tier0SubscriptionId",
                            "value":"^$config.storage.tier0StorageAccount.subscriptionId"
                        },
                        {
                            "key":"ConnectionName",
                            "value":"^$config.automationAccount.connectionName"
                        }
                    ],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                },
                {
                    "name":"Start-ImageManagementImageCreation",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementImageCreation.ps1",
                    "scheduleName":"HourlySchedule",
                    "scheduleHourInterval":1,
                    "executeBeforeMoveForward":false,
                    "parameters":[
                        {
                            "key":"ConfigStorageAccountResourceGroupName",
                            "value":"^$config.storage.tier0StorageAccount.resourceGroup"
                        },
                        {
                            "key":"ConfigStorageAccountName",
                            "value":"^$config.storage.tier0StorageAccount.storageAccountName"
                        },
                        {
                            "key":"ConfigurationTableName",
                            "value":"^$config.storage.tier0StorageAccount.configurationTableName"
                        },
                        {
                            "key":"Tier0SubscriptionId",
                            "value":"^$config.storage.tier0StorageAccount.subscriptionId"
                        },
                        {
                            "key":"ConnectionName",
                            "value":"^$config.automationAccount.connectionName"
                        }
                    ],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ],
            "copyProcessAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },                
                {
                    "name":"Start-ImageManagementVhdCopyTier2",
                    "scriptPath":"..\\Runbooks\\Start-ImageManagementVhdCopyTier2.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ],
            "imageCreationProcessAutomationAccount":
            [
                {
                    "name":"Update-ModulesInAutomationToLatestVersion",
                    "scriptPath":"https://raw.githubusercontent.com/azureautomation/runbooks/master/Utility/ARM/Update-ModulesInAutomationToLatestVersion.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":true,
                    "parameters":[],
                    "requiredModules":[]
                },
                {
                    "name":"New-ImageManagementImage",
                    "scriptPath":"..\\Runbooks\\New-ImageManagementImage.ps1",
                    "scheduleName":null,
                    "scheduleHourInterval":null,
                    "executeBeforeMoveForward":false,
                    "parameters":[],
                    "requiredModules":[
                        "AzureRmStorageTable",
                        "AzureRmStorageQueue",
                        "MSOnline",
                        "AzureRmImageManagement"
                    ]                    
                }
            ]
        }
    }
}